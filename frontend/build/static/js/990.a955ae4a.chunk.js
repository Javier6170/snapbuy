"use strict";(self.webpackChunksnapbuy=self.webpackChunksnapbuy||[]).push([[990],{722:(e,t,s)=>{s.d(t,{A:()=>n});s(43);var l=s(579);const a=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:2}),n=e=>{var t;let{product:s,onClose:n}=e;return(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,l.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-4 sm:p-6 w-full max-w-lg max-h-full overflow-y-auto relative",children:[(0,l.jsx)("button",{onClick:n,className:"absolute top-3 right-3 text-gray-500 hover:text-gray-800 focus:outline-none","aria-label":"Cerrar",children:"\u2715"}),(0,l.jsx)("div",{className:"w-full mb-4",children:(0,l.jsx)("img",{src:null!==(t=s.imageUrl)&&void 0!==t?t:"/placeholder.png",alt:s.name,className:"w-full h-auto max-h-56 sm:max-h-64 object-contain rounded-lg mx-auto",loading:"lazy"})}),(0,l.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-2",children:s.name}),(0,l.jsx)("p",{className:"text-gray-700 mb-4 text-sm sm:text-base",children:s.description}),(0,l.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,l.jsx)("span",{className:"text-lg sm:text-xl font-semibold text-green-600",children:a.format(s.price)}),(0,l.jsxs)("span",{className:"text-sm sm:text-base text-gray-500",children:["Stock: ",s.stock]})]}),(0,l.jsx)("button",{onClick:n,className:"w-full py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 focus:outline-none transition",children:"Cerrar"})]})})}},990:(e,t,s)=>{s.r(t),s.d(t,{default:()=>h});var l=s(379),a=s(43),n=s(3);const r=()=>(0,n.wA)();var o=s(2),i=s(50);var c=s(123),d=s(722),m=s(579);const u=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:2}),x=a.memo((e=>{let{product:t,quantity:s,onQuantityChange:l,onAdd:a,onSelect:n}=e;return(0,m.jsxs)("div",{role:"button",onClick:n,className:"bg-white rounded-2xl shadow hover:shadow-xl transform hover:-translate-y-1 transition cursor-pointer overflow-hidden flex flex-col min-h-[420px]",children:[(0,m.jsx)("div",{className:"w-full h-48 flex items-center justify-center bg-white border-b",children:(0,m.jsx)("img",{src:t.imageUrl||"/placeholder.png",alt:t.name,loading:"lazy",className:"max-h-full max-w-full object-contain"})}),(0,m.jsxs)("div",{className:"p-4 flex flex-col flex-1 justify-between",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-2",children:t.name}),(0,m.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,m.jsx)("span",{className:"text-green-600 text-lg font-bold",children:u.format(t.price)}),(0,m.jsxs)("span",{className:"text-gray-500 text-sm",children:["Stock: ",t.stock]})]})]}),(0,m.jsxs)("div",{className:"flex items-center gap-2 mt-auto",children:[(0,m.jsx)("input",{type:"number",min:1,max:t.stock,value:s,onClick:e=>e.stopPropagation(),onChange:e=>{e.stopPropagation(),l(t.id,parseInt(e.target.value,10))},className:"w-16 px-2 py-1 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-300"}),(0,m.jsx)("button",{onClick:e=>{e.stopPropagation(),a(t)},disabled:0===t.stock,className:"px-4 py-2 rounded-lg font-medium transition ".concat(0===t.stock?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"),children:0===t.stock?"Agotado":"Agregar"})]})]})]})})),g=e=>{let{products:t,quantities:s,onQuantityChange:l,onAdd:a,onSelect:n}=e;return(0,m.jsx)("div",{className:"grid gap-6 grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:t.map((e=>(0,m.jsx)(x,{product:e,quantity:s[e.id]||1,onQuantityChange:l,onAdd:a,onSelect:()=>n(e)},e.id)))})},h=()=>{const e=r(),t=(0,o.Zp)(),s=(0,n.d4)((e=>e.cart.items.length)),{items:u,loading:x,error:h}=function(){const e=r(),{items:t,loading:s,error:l}=(0,n.d4)((e=>e.products));return(0,a.useEffect)((()=>{e((0,i.HB)())}),[e]),{items:t,loading:s,error:l}}(),[p,b]=(0,a.useState)({}),[f,j]=(0,a.useState)(null);return(0,m.jsxs)("section",{className:"flex flex-col flex-grow px-4 sm:px-6 lg:px-8 pt-8 pb-20 lg:pt-8 lg:pb-8",children:[(0,m.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Nuestros Productos"}),x&&(0,m.jsx)("div",{className:"grid gap-6 grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:Array.from({length:8}).map(((e,t)=>(0,m.jsxs)("div",{className:"animate-pulse",children:[(0,m.jsx)("div",{className:"h-48 bg-gray-200 mb-4 rounded"}),(0,m.jsx)("div",{className:"h-6 bg-gray-200 mb-2 rounded w-3/4"}),(0,m.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/2"})]},t)))}),h&&(0,m.jsx)("p",{className:"text-center text-red-500 mt-4",children:h}),!x&&!h&&(0,m.jsx)(g,{products:u,quantities:p,onQuantityChange:(e,t)=>{var s,a;const n=null!==(s=null===(a=u.find((t=>t.id===e)))||void 0===a?void 0:a.stock)&&void 0!==s?s:1,r=Math.max(1,Math.min(t,n));b((t=>(0,l.A)((0,l.A)({},t),{},{[e]:r})))},onAdd:t=>{const s=p[t.id]||1;e((0,c.bE)({productId:t.id,quantity:s})),e((0,i.UW)({productId:t.id,quantity:s}))},onSelect:j}),f&&(0,m.jsx)(d.A,{product:f,onClose:()=>j(null)}),s>0&&(0,m.jsxs)("div",{className:"lg:hidden fixed bottom-0 left-0 w-full bg-white border-t p-4 flex justify-between items-center shadow-lg",children:[(0,m.jsxs)("span",{className:"font-medium",children:[s," ",s>1?"art\xedculos":"art\xedculo"," en tu carrito"]}),(0,m.jsx)("button",{onClick:()=>t("/checkout"),className:"bg-blue-600 text-white px-4 py-2 rounded-lg",children:"Ir a pagar"})]})]})}}}]);
//# sourceMappingURL=990.a955ae4a.chunk.js.map