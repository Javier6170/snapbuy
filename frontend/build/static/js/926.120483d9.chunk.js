"use strict";(self.webpackChunksnapbuy=self.webpackChunksnapbuy||[]).push([[926],{722:(e,s,t)=>{t.d(s,{A:()=>l});t(43);var r=t(579);const a=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:2}),l=e=>{var s;let{product:t,onClose:l}=e;return(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-4 sm:p-6 w-full max-w-lg max-h-full overflow-y-auto relative",children:[(0,r.jsx)("button",{onClick:l,className:"absolute top-3 right-3 text-gray-500 hover:text-gray-800 focus:outline-none","aria-label":"Cerrar",children:"\u2715"}),(0,r.jsx)("div",{className:"w-full mb-4",children:(0,r.jsx)("img",{src:null!==(s=t.imageUrl)&&void 0!==s?s:"/placeholder.png",alt:t.name,className:"w-full h-auto max-h-56 sm:max-h-64 object-contain rounded-lg mx-auto",loading:"lazy"})}),(0,r.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-2",children:t.name}),(0,r.jsx)("p",{className:"text-gray-700 mb-4 text-sm sm:text-base",children:t.description}),(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("span",{className:"text-lg sm:text-xl font-semibold text-green-600",children:a.format(t.price)}),(0,r.jsxs)("span",{className:"text-sm sm:text-base text-gray-500",children:["Stock: ",t.stock]})]}),(0,r.jsx)("button",{onClick:l,className:"w-full py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 focus:outline-none transition",children:"Cerrar"})]})})}},926:(e,s,t)=>{t.r(s),t.d(s,{default:()=>L});var r=t(43),a=t(3),l=t(2),n=t(579);const c=e=>{let{steps:s,current:t}=e;return(0,n.jsx)("div",{className:"flex items-center mb-8",children:s.map(((e,a)=>(0,n.jsxs)(r.Fragment,{children:[(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsx)("div",{className:"\n              w-8 h-8 rounded-full flex items-center justify-center \n              ".concat(a<=t?"bg-blue-600 text-white":"bg-gray-200 text-gray-600","\n            "),children:a+1}),(0,n.jsx)("span",{className:"mt-2 text-xs",children:e})]}),a<s.length-1&&(0,n.jsx)("div",{className:"flex-1 h-0.5 mx-2 ".concat(a<t?"bg-blue-600":"bg-gray-200")})]},a)))})};var i=t(722),d=t(379);const o=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}),m=e=>{let{onNext:s}=e;const[t,l]=(0,r.useState)(!1),c=(0,a.d4)((e=>e.checkout.step)),i=(0,a.d4)((e=>e.cart.items)),m=(0,a.d4)((e=>e.products.items)),u=i.map((e=>{const s=m.find((s=>s.id===e.productId));return(0,d.A)((0,d.A)({},e),{},{product:s})}));if(0===u.length)return(0,n.jsx)("p",{className:"text-center text-gray-600 mt-8",children:"Tu carrito est\xe1 vac\xedo."});const x=u.reduce(((e,s)=>{let{product:t,quantity:r}=s;return e+t.price*r}),0)+3e3+5e3;return(0,n.jsxs)("div",{className:"p-6 w-full bg-white rounded-2xl shadow-xl flex flex-col h-full lg:sticky lg:top-6 lg:max-h-[calc(100vh-64px)] lg:overflow-auto",children:[(0,n.jsx)("h2",{className:"text-3xl font-semibold text-gray-800 mb-6",children:"Resumen de tu compra"}),(0,n.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-6 mb-6",children:[u.map((e=>{let{product:s,quantity:t}=e;return(0,n.jsxs)("div",{className:"flex justify-between items-start text-gray-700",children:[(0,n.jsxs)("div",{className:"flex-1 pr-4",children:[(0,n.jsx)("p",{className:"font-medium text-lg",children:s.name}),(0,n.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[t," \xd7 ",o.format(s.price)]})]}),(0,n.jsx)("p",{className:"font-semibold text-lg",children:o.format(s.price*t)})]},s.id)})),(0,n.jsxs)("div",{className:"flex justify-between text-gray-700 text-base",children:[(0,n.jsx)("span",{children:"Tarifa base"}),(0,n.jsx)("span",{children:o.format(3e3)})]}),(0,n.jsxs)("div",{className:"flex justify-between text-gray-700 text-base",children:[(0,n.jsx)("span",{children:"Env\xedo"}),(0,n.jsx)("span",{children:o.format(5e3)})]})]}),(0,n.jsxs)("div",{className:"flex justify-between text-2xl font-bold text-gray-900 border-t pt-4 mb-6",children:[(0,n.jsx)("span",{children:"Total"}),(0,n.jsx)("span",{children:o.format(x)})]}),1===c&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("label",{className:"inline-flex items-center mb-6",children:[(0,n.jsx)("input",{type:"checkbox",className:"mr-2",checked:t,onChange:()=>l((e=>!e))}),(0,n.jsxs)("span",{className:"text-sm text-gray-600",children:["Acepto los"," ",(0,n.jsx)("button",{className:"text-blue-600 underline",children:"t\xe9rminos y condiciones"}),"."]})]}),(0,n.jsx)("button",{onClick:s,disabled:!t,className:"w-full py-4 text-lg text-white rounded-lg transition shadow-md ".concat(t?"bg-blue-600 hover:bg-blue-700":"bg-gray-300 cursor-not-allowed"),children:"Contuinar pago con tarjeta de credito"})]})]})};var u=t(858),x=t(403),p=t(687),h=t(899);const b=h.Ik({country:h.Yj().required("Pa\xeds requerido"),firstName:h.Yj().required("Nombre requerido"),lastName:h.Yj().required("Apellido requerido"),documentNumber:h.Yj().required("N\xfamero de documento"),email:h.Yj().required("Correo electronico requerido"),address1:h.Yj().required("Direcci\xf3n requerida"),address2:h.Yj(),city:h.Yj().required("Ciudad requerida"),state:h.Yj().required("Provincia/Estado"),postalCode:h.Yj(),phone:h.Yj().required("Tel\xe9fono requerido"),saveInfo:h.zM(),sendSmsOffers:h.zM()}).required(),j=(b.concat(h.Ik({cardNumber:h.Yj().required("N\xfamero de tarjeta requerido").matches(/^[0-9]{16}$/,"Debe tener 16 d\xedgitos"),expMonth:h.Yj().required("Mes requerido").matches(/^(0[1-9]|1[0-2])$/,"Mes inv\xe1lido (01\u201312)"),expYear:h.Yj().required("A\xf1o requerido").matches(/^[0-9]{2}$/,"Debe tener dos d\xedgitos"),cvc:h.Yj().required("CVC requerido").matches(/^[0-9]{3}$/,"Debe tener 3 d\xedgitos")})),["Colombia","M\xe9xico","Espa\xf1a"]),g=["Antioquia","Cundinamarca","Valle del Cauca"],f=e=>{let{onBack:s,onNext:t}=e;const r=(0,a.wA)(),{register:l,handleSubmit:c,formState:{errors:i,isSubmitting:o}}=(0,u.mN)({resolver:(0,x.t)(b),mode:"onBlur"});return(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-2xl font-bold",children:"2. Informaci\xf3n de entrega"}),(0,n.jsxs)("form",{onSubmit:c((e=>{r((0,p.t)(e)),t()})),className:"space-y-5",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium",children:"Correo electr\xf3nico"}),(0,n.jsx)("input",(0,d.A)((0,d.A)({type:"email"},l("email")),{},{placeholder:"correo@ejemplo.com",className:"mt-1 w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-300"})),i.email&&(0,n.jsx)("p",{className:"text-red-500 text-xs mt-1",children:i.email.message})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium",children:"Pa\xeds / Regi\xf3n"}),(0,n.jsxs)("select",(0,d.A)((0,d.A)({},l("country")),{},{className:"mt-1 w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-300",children:[(0,n.jsx)("option",{value:"",children:"Seleccione"}),j.map((e=>(0,n.jsx)("option",{value:e,children:e},e)))]})),i.country&&(0,n.jsx)("p",{className:"text-red-500 text-xs mt-1",children:i.country.message})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium",children:"Nombre"}),(0,n.jsx)("input",(0,d.A)((0,d.A)({},l("firstName")),{},{placeholder:"Juan",className:"mt-1 w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-300"})),i.firstName&&(0,n.jsx)("p",{className:"text-red-500 text-xs mt-1",children:i.firstName.message})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium",children:"Apellidos"}),(0,n.jsx)("input",(0,d.A)((0,d.A)({},l("lastName")),{},{placeholder:"P\xe9rez",className:"mt-1 w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-300"})),i.lastName&&(0,n.jsx)("p",{className:"text-red-500 text-xs mt-1",children:i.lastName.message})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium",children:"No. de Documento"}),(0,n.jsx)("input",(0,d.A)((0,d.A)({},l("documentNumber")),{},{placeholder:"123456789",className:"mt-1 w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-300"})),i.documentNumber&&(0,n.jsx)("p",{className:"text-red-500 text-xs mt-1",children:i.documentNumber.message})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium",children:"Direcci\xf3n"}),(0,n.jsx)("input",(0,d.A)((0,d.A)({},l("address1")),{},{placeholder:"Calle 123 #45-67",className:"mt-1 w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-300"})),i.address1&&(0,n.jsx)("p",{className:"text-red-500 text-xs mt-1",children:i.address1.message})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium",children:"Casa, apto, etc. (opcional)"}),(0,n.jsx)("input",(0,d.A)((0,d.A)({},l("address2")),{},{placeholder:"Apto 302",className:"mt-1 w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-300"}))]}),(0,n.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium",children:"Ciudad"}),(0,n.jsx)("input",(0,d.A)((0,d.A)({},l("city")),{},{placeholder:"Medell\xedn",className:"mt-1 w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-300"})),i.city&&(0,n.jsx)("p",{className:"text-red-500 text-xs mt-1",children:i.city.message})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium",children:"Provincia / Estado"}),(0,n.jsxs)("select",(0,d.A)((0,d.A)({},l("state")),{},{className:"mt-1 w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-300",children:[(0,n.jsx)("option",{value:"",children:"Seleccione"}),g.map((e=>(0,n.jsx)("option",{value:e,children:e},e)))]})),i.state&&(0,n.jsx)("p",{className:"text-red-500 text-xs mt-1",children:i.state.message})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium",children:"C\xf3digo postal (opcional)"}),(0,n.jsx)("input",(0,d.A)((0,d.A)({},l("postalCode")),{},{placeholder:"630001",className:"mt-1 w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-300"}))]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium",children:"Tel\xe9fono"}),(0,n.jsx)("input",(0,d.A)((0,d.A)({},l("phone")),{},{placeholder:"+57 3001234567",className:"mt-1 w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-300"})),i.phone&&(0,n.jsx)("p",{className:"text-red-500 text-xs mt-1",children:i.phone.message})]}),(0,n.jsxs)("div",{className:"flex justify-between pt-6",children:[(0,n.jsx)("button",{type:"button",onClick:s,className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"\u2190 Anterior"}),(0,n.jsx)("button",{type:"submit",disabled:o,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition disabled:opacity-50",children:"Siguiente \u2192"})]})]})]})};var N=t(941);const y=t.p+"static/media/mastercard.7f8a8f114b7a7bc263fbf0de706011f6.svg";const v=t.p+"static/media/visa.20e13694da6ba98fc8bdfa218579fab1.svg";const w=t.p+"static/media/americanexpress.29f7c30356825d951b21a14ebb8b23c1.svg";var C,A;new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0});const k=Number(null!==(C="3000")?C:3e3),q=Number(null!==(A="5000")?A:5e3),T=h.Ik({cardNumber:h.Yj().required("N\xfamero de tarjeta requerido").matches(/^[0-9]{16}$/,"Debe tener 16 d\xedgitos"),expMonth:h.Yj().required("Mes requerido"),expYear:h.Yj().required("A\xf1o requerido"),cvc:h.Yj().required("CVC requerido").matches(/^[0-9]{3,4}$/,"3 o 4 d\xedgitos"),name:h.Yj().required("Nombre en tarjeta requerido"),idType:h.Yj().required("Tipo de documento requerido"),idNumber:h.Yj().required("N\xfamero de documento requerido"),installments:h.Yj().required("Debes seleccionar n\xfamero de cuotas"),acceptTerms:h.zM().oneOf([!0],"Debes aceptar el reglamento"),acceptData:h.zM().oneOf([!0],"Debes autorizar tratamiento de datos")}).required(),Y=Array.from({length:12},((e,s)=>(s+1).toString().padStart(2,"0"))),I=(new Date).getFullYear(),D=Array.from({length:10},((e,s)=>(I+s).toString().slice(-2))),S=()=>(0,n.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 z-50 flex items-center justify-center",children:(0,n.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-lg flex items-center gap-2",children:[(0,n.jsxs)("svg",{className:"animate-spin h-6 w-6 text-blue-600",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}),(0,n.jsx)("span",{children:"Procesando pago..."})]})}),F=e=>{let{onBack:s,onNext:t}=e;const{handlePayment:l,loading:c}=(()=>{const e=(0,a.wA)(),[s,t]=(0,r.useState)(!1),[l,n]=(0,r.useState)(null);return{handlePayment:async s=>{try{n(null),t(!0),e((0,N.nb)());const l=await fetch("".concat("http://localhost:4000/api","/customers"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s.name,address:s.address,email:s.email,documentType:s.documentType,documentNumber:s.documentNumber})}),c=await l.json(),i=await fetch("".concat("http://localhost:4000/api","/payments"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerId:c.id,customerEmail:s.email,amountInCents:s.amountInCents,cardNumber:s.cardNumber,cvc:s.cvc,expMonth:s.expMonth,expYear:s.expYear,name:s.name,documentType:s.documentType,documentNumber:s.documentNumber,installments:s.installments,products:s.products,deliveryInfo:s.deliveryInfo})});if(!i.ok){var r,a;const e=await i.json(),s=null===(r=e.details)||void 0===r||null===(a=r.error)||void 0===a?void 0:a.messages,t=s?Object.values(s).flat().join(", "):e.message||"Error desconocido";throw new Error(t)}const d=await i.json();return e((0,N.q)({id:d.transactionId})),!0}catch(l){return e((0,N.gr)({message:l.message})),n(l.message),!1}finally{t(!1)}},loading:s,error:l}})(),i=(0,a.d4)((e=>e.customer)),{address1:o,address2:m,city:p,state:h,postalCode:b,country:j,phone:g,email:f,firstName:C,lastName:A}=i,I={addressLine1:o,addressLine2:m,city:p,state:h,postalCode:b||"",country:j,phone:g},F=(0,a.d4)((e=>e.cart.items)),M=(0,a.d4)((e=>e.products.items));if(!F.length)throw new Error("Carrito vac\xedo");const P=F.map((e=>{const s=M.find((s=>s.id===e.productId));return s?{id:s.id,price:s.price,quantity:e.quantity}:null})).filter(Boolean),O=100*(P.reduce(((e,s)=>e+s.price*s.quantity),0)+k+q),E=(0,x.t)(T),{control:z,register:B,handleSubmit:L,watch:R,formState:{errors:V}}=(0,u.mN)({resolver:E,defaultValues:{cardNumber:"",expMonth:"",expYear:"",cvc:"",name:"",idType:"",idNumber:"",installments:"",acceptTerms:!1,acceptData:!1}}),$=(Number(R("installments")),R("cardNumber")),J=/^4/.test(U=$)?"visa":/^5[1-5]/.test(U)?"mastercard":/^3[47]/.test(U)?"amex":null;var U;(0,r.useEffect)((()=>{const e=e=>{c&&(e.preventDefault(),e.returnValue="")};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)}),[c]);const Z=e=>"h-6 transition-opacity ".concat(J===e?"opacity-100":"opacity-30");return(0,n.jsxs)(n.Fragment,{children:[c&&(0,n.jsx)(S,{}),(0,n.jsx)("div",{className:"flex items-center justify-center gap-2 mb-6 text-green-600",children:(0,n.jsx)("h2",{className:"text-2xl font-bold",children:"Pago seguro"})}),(0,n.jsxs)("form",{onSubmit:L((e=>l({cardNumber:e.cardNumber,expMonth:e.expMonth,expYear:e.expYear,cvc:e.cvc,name:e.name,address:i.address1,email:i.email,amountInCents:O,products:P.map((e=>({productId:e.id,quantity:e.quantity}))),documentType:e.idType,documentNumber:e.idNumber,installments:Number(e.installments),deliveryInfo:I}).finally(t))),className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex gap-4 justify-center mb-4",children:[(0,n.jsx)("img",{src:v,alt:"Visa",className:Z("visa")}),(0,n.jsx)("img",{src:y,alt:"Mastercard",className:Z("mastercard")}),(0,n.jsx)("img",{src:w,alt:"Amex",className:Z("amex")})]}),(0,n.jsx)(u.xI,{name:"cardNumber",control:z,render:e=>{var s;let{field:{value:t,onChange:r,onBlur:a}}=e;const l=(null===(s=t.replace(/\D/g,"").slice(0,16).match(/.{1,4}/g))||void 0===s?void 0:s.join(" "))||"";return(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"cardNumber",className:"block text-sm font-medium mb-1",children:"N\xfamero de tarjeta"}),(0,n.jsx)("input",{id:"cardNumber",inputMode:"numeric",autoComplete:"cc-number",placeholder:"\u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022",value:l,onChange:e=>r(e.currentTarget.value.replace(/\s+/g,"")),onBlur:a,className:"w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-300"}),V.cardNumber&&(0,n.jsx)("p",{className:"text-red-500 text-xs mt-1",children:V.cardNumber.message})]})}}),(0,n.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Mes"}),(0,n.jsx)(u.xI,{name:"expMonth",control:z,render:e=>{let{field:s}=e;return(0,n.jsxs)("select",(0,d.A)((0,d.A)({},s),{},{autoComplete:"cc-exp-month",className:"w-full border rounded-lg px-2 py-2 focus:ring-2 focus:ring-blue-300",children:[(0,n.jsx)("option",{value:"",children:"Mes"}),Y.map((e=>(0,n.jsx)("option",{value:e,children:e},e)))]}))}}),V.expMonth&&(0,n.jsx)("p",{className:"text-red-500 text-xs mt-1",children:V.expMonth.message})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1",children:"A\xf1o"}),(0,n.jsx)(u.xI,{name:"expYear",control:z,render:e=>{let{field:s}=e;return(0,n.jsxs)("select",(0,d.A)((0,d.A)({},s),{},{autoComplete:"cc-exp-year",className:"w-full border rounded-lg px-2 py-2 focus:ring-2 focus:ring-blue-300",children:[(0,n.jsx)("option",{value:"",children:"A\xf1o"}),D.map((e=>(0,n.jsx)("option",{value:e,children:e},e)))]}))}}),V.expYear&&(0,n.jsx)("p",{className:"text-red-500 text-xs mt-1",children:V.expYear.message})]}),(0,n.jsxs)("div",{className:"col-span-2 relative",children:[(0,n.jsxs)("label",{htmlFor:"cvc",className:"block text-sm font-medium mb-1",children:["CVC",(0,n.jsx)("span",{title:"C\xf3digo de seguridad en reverso",className:"ml-1 text-gray-400 cursor-help",children:"?"})]}),(0,n.jsx)("input",(0,d.A)((0,d.A)({id:"cvc",type:"password",inputMode:"numeric",autoComplete:"cc-csc",maxLength:4},B("cvc")),{},{className:"w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-300"})),V.cvc&&(0,n.jsx)("p",{className:"text-red-500 text-xs mt-1",children:V.cvc.message})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"col-span-2",children:[(0,n.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium mb-1",children:"Nombre en tarjeta"}),(0,n.jsx)("input",(0,d.A)((0,d.A)({id:"name",placeholder:"JUAN PEREZ",autoComplete:"cc-name"},B("name")),{},{className:"w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-300 uppercase"})),V.name&&(0,n.jsx)("p",{className:"text-red-500 text-xs mt-1",children:V.name.message})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"idType",className:"block text-sm font-medium mb-1",children:"Tipo doc."}),(0,n.jsx)(u.xI,{name:"idType",control:z,render:e=>{let{field:s}=e;return(0,n.jsxs)("select",(0,d.A)((0,d.A)({},s),{},{className:"w-full border rounded-lg px-2 py-2 focus:ring-2 focus:ring-blue-300",children:[(0,n.jsx)("option",{value:"",children:"Seleccione"}),(0,n.jsx)("option",{value:"CC",children:"C\xe9dula ciudadan\xeda"}),(0,n.jsx)("option",{value:"CE",children:"C\xe9dula extranjer\xeda"}),(0,n.jsx)("option",{value:"TI",children:"Tarjeta identidad"})]}))}}),V.idType&&(0,n.jsx)("p",{className:"text-red-500 text-xs mt-1",children:V.idType.message})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"idNumber",className:"block text-sm font-medium mb-1",children:"N\xfamero doc."}),(0,n.jsx)("input",(0,d.A)((0,d.A)({id:"idNumber",autoComplete:"id-number"},B("idNumber")),{},{className:"w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-300 uppercase"})),V.idNumber&&(0,n.jsx)("p",{className:"text-red-500 text-xs mt-1",children:V.idNumber.message})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"installments",className:"block text-sm font-medium mb-1",children:"Cuotas"}),(0,n.jsx)(u.xI,{name:"installments",control:z,render:e=>{let{field:s}=e;return(0,n.jsxs)("select",(0,d.A)((0,d.A)({},s),{},{id:"installments",className:"w-full border rounded-lg px-2 py-2 focus:ring-2 focus:ring-blue-300",children:[(0,n.jsx)("option",{value:"",children:"Seleccione"}),Array.from({length:12},((e,s)=>(s+1).toString())).map((e=>(0,n.jsx)("option",{value:e,children:e},e)))]}))}}),V.installments&&(0,n.jsx)("p",{className:"text-red-500 text-xs mt-1",children:V.installments.message})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("input",(0,d.A)((0,d.A)({id:"acceptTerms",type:"checkbox"},B("acceptTerms")),{},{className:"mr-2"})),(0,n.jsx)("label",{htmlFor:"acceptTerms",className:"text-sm",children:"Acepto el reglamento"})]}),V.acceptTerms&&(0,n.jsx)("p",{className:"text-red-500 text-xs",children:V.acceptTerms.message}),(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("input",(0,d.A)((0,d.A)({id:"acceptData",type:"checkbox"},B("acceptData")),{},{className:"mr-2"})),(0,n.jsx)("label",{htmlFor:"acceptData",className:"text-sm",children:"Autorizo tratamiento datos"})]}),V.acceptData&&(0,n.jsx)("p",{className:"text-red-500 text-xs",children:V.acceptData.message})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("button",{type:"button",onClick:s,className:"px-4 py-2 border rounded-lg hover:bg-gray-100",children:"\u2190 Volver"}),(0,n.jsx)("button",{type:"submit",disabled:c,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:c?"Procesando...":"Pagar con tarjeta de credito"})]})]})]})},M=r.memo(F),P=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}),O=e=>{let{onRestart:s}=e;const{transactionId:t,status:r}=(0,a.d4)((e=>e.transaction)),l=(0,a.d4)((e=>e.customer)),c=(0,a.d4)((e=>e.cart.items)),i=(0,a.d4)((e=>e.products.items)),o=c.map((e=>{const s=i.find((s=>s.id===e.productId));return(0,d.A)((0,d.A)({},e),{},{product:s})})),m=o.reduce(((e,s)=>{let{product:t,quantity:r}=s;return e+t.price*r}),0),u=Number("3000")||3e3,x=Number("5000")||5e3,p=m+u+x,h="success"===r,b=h?"APROBADO":"FALLIDO";return(0,n.jsx)("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center p-4",children:(0,n.jsxs)("div",{className:"w-full max-w-3xl bg-white p-6 sm:p-8 md:p-12 rounded-2xl shadow-xl",children:[(0,n.jsx)("h2",{className:"text-3xl sm:text-4xl font-bold text-center mb-6",children:"Comprobante de Pago"}),(0,n.jsxs)("p",{className:"text-center mb-4 text-lg",children:["Estado: ",(0,n.jsx)("span",{className:"font-semibold ".concat(h?"text-green-600":"text-red-600"),children:b})]}),(0,n.jsxs)("p",{className:"text-center mb-8 text-sm sm:text-base",children:["ID Transacci\xf3n:"," ",(0,n.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded",children:t})]}),(0,n.jsxs)("section",{className:"mb-8",children:[(0,n.jsx)("h3",{className:"text-xl sm:text-2xl font-semibold mb-3",children:"Detalle de Art\xedculos"}),(0,n.jsx)("ul",{className:"divide-y divide-gray-200",children:o.map((e=>{let{product:s,quantity:t}=e;return(0,n.jsxs)("li",{className:"py-2 flex justify-between text-sm sm:text-base",children:[(0,n.jsxs)("span",{children:[s.name," \xd7 ",t]}),(0,n.jsx)("span",{children:P.format(s.price*t)})]},s.id)}))})]}),(0,n.jsxs)("section",{className:"border-t pt-6 mb-8 text-sm sm:text-base space-y-2",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{children:"Subtotal"}),(0,n.jsx)("span",{children:P.format(m)})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{children:"Tarifa base"}),(0,n.jsx)("span",{children:P.format(u)})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{children:"Env\xedo"}),(0,n.jsx)("span",{children:P.format(x)})]}),(0,n.jsxs)("div",{className:"flex justify-between font-bold text-lg",children:[(0,n.jsx)("span",{children:"Total"}),(0,n.jsx)("span",{children:P.format(p)})]})]}),(0,n.jsxs)("section",{className:"mb-8 text-sm sm:text-base",children:[(0,n.jsx)("h3",{className:"text-xl sm:text-2xl font-semibold mb-3",children:"Datos de Env\xedo"}),(0,n.jsxs)("address",{className:"not-italic space-y-1",children:[(0,n.jsxs)("div",{children:[l.firstName," ",l.lastName]}),(0,n.jsxs)("div",{children:[l.address1,l.address2?", ".concat(l.address2):""]}),(0,n.jsxs)("div",{children:[l.city,", ",l.state," ",l.postalCode]}),(0,n.jsx)("div",{children:l.country}),l.phone&&(0,n.jsxs)("div",{children:["Tel: ",l.phone]})]})]}),(0,n.jsx)("button",{onClick:s,className:"w-full py-3 sm:py-4 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition text-base sm:text-lg",children:"Finalizar"})]})})};var E=t(59),z=t(123);const B=["Carrito","Entrega","Pago","Resultado"],L=()=>{const e=(0,a.wA)(),s=(0,l.Zp)(),t=(0,a.d4)((e=>e.checkout.step)),d=(0,a.d4)((e=>e.cart.items)),o=(0,a.d4)((e=>e.products.items)),[u,x]=(0,r.useState)(null),[p,h]=(0,r.useState)(1===t);if((0,r.useEffect)((()=>{!d.length&&t>1&&(e((0,E.F)(1)),s("/",{replace:!0}))}),[d.length,t,e,s]),(0,r.useEffect)((()=>{h(1===t)}),[t]),!d.length)return null;const b=s=>e((0,E.F)(s)),j=2===t||3===t;return(0,n.jsxs)("section",{className:"max-w-7xl mx-auto mt-8 p-4 ".concat(j?"lg:grid lg:grid-cols-2 gap-8":""),children:[(0,n.jsxs)("div",{className:j?"lg:sticky lg:top-6":"",children:[(0,n.jsx)(c,{steps:B,current:t-1}),4!==t&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"space-y-4 mt-6 mb-6",children:d.map((e=>{let{productId:s,quantity:t}=e;const r=o.find((e=>e.id===s));return(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)("img",{src:r.imageUrl,alt:r.name,className:"w-12 h-12 object-cover rounded-lg cursor-pointer",onClick:()=>x(s)}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("h3",{className:"font-semibold text-sm",children:r.name}),(0,n.jsxs)("p",{className:"text-xs text-gray-600",children:[t," \xd7 ",r.price.toLocaleString("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0})]})]})]},s)}))}),u&&(0,n.jsx)(i.A,{product:o.find((e=>e.id===u)),onClose:()=>x(null)}),(0,n.jsxs)("div",{className:"lg:hidden mb-6",children:[t>=2&&t<=3&&(0,n.jsxs)("button",{onClick:()=>h((e=>!e)),className:"w-full flex justify-between items-center bg-gray-100 p-3 rounded-lg mb-2",children:[(0,n.jsx)("span",{className:"font-medium",children:"Resumen de la compra"}),(0,n.jsx)("span",{className:"text-xl",children:p?"-":"+"})]}),(1===t||p)&&(0,n.jsx)(m,{onNext:()=>b(t+1)})]})]}),(0,n.jsx)("div",{className:"hidden lg:block",children:t>=1&&t<=3&&(0,n.jsx)(m,{onNext:()=>b(t+1)})})]}),2===t&&(0,n.jsx)("div",{className:"w-full bg-white p-6 rounded-2xl shadow-xl",children:(0,n.jsx)(f,{onBack:()=>b(1),onNext:()=>b(3)})}),3===t&&(0,n.jsx)("div",{className:"w-full bg-white p-6 rounded-2xl shadow-xl",children:(0,n.jsx)(M,{onBack:()=>b(2),onNext:()=>b(4)})}),4===t&&(0,n.jsx)("div",{className:"".concat(j?"":"w-full mt-4"),children:(0,n.jsx)(O,{onRestart:()=>{e((0,z.sX)()),e((0,E.F)(1)),s("/",{replace:!0})}})})]})}}}]);
//# sourceMappingURL=926.120483d9.chunk.js.map